{{>user-profile}}

<div class="main-wrapper">

<div class="posts">
 {{#each posts}}
<div class="post_card">
<div class="user-info">
    <div class="userPic">
    <img  src= "{{this.uid.profileURL}}"/>

    </div>
<div class="user-name">
<h4> 
    <a href="/user?id={{this.uid._id}}">
    
{{this.uid.name}}
</a>

    </h4>
<div class="post_date">
   
   <p>

   {{this.createdAt}}
   </p>
</div>
</div>
    
</div>

   

<div class="post_title">
   <h4>
<a  href="/{{this._id}}"> {{this.title}}</a> 
 </h4>
 
</div>
<footer>

<form action="/editPost?postId={{this._id}}" method="post">
<button class="btn" type="submit"> Edit </button>
</form>
<button class="tiggerbtn btn btn-outline">Delete</button>

      <div class="modal-wrapper">
        <div class="modal-contain">
          <h4> Do you want to delete this post?</h4>
          <div class="action-btn">

  <button class="cancelbtn btn-primary">cancel</button>
<form method="post" action="/post/delete/{{this._id}}">
<button class="btn-secondary" type="submit">Delete</button>
</form>
          </div>
        
        </div>
      </div>
</footer>
    </div>
{{/each}} 
</div>

</div>

<script defer>

let modals = document.querySelectorAll(".modal-wrapper");
let tiggerbtn = document.querySelectorAll(".tiggerbtn") ;
let cancelbtns = document.querySelectorAll(".cancelbtn");




// open modal
tiggerbtn.forEach((btn,i)=>{
tiggerbtn[i].addEventListener("click",()=>{
modals[i].classList.toggle("show-modal");

})

})

//cancle modal when cancle btn is clicked
cancelbtns.forEach((btn,i)=>{
  cancelbtns[i].addEventListener("click",()=>{
    modals[i].classList.toggle("show-modal");
  })
})




// cancel modal when user clicked outside the box
window.addEventListener("click", (e)=>{

for(const modal of modals){

    if(e.target === modal){
        modal.classList.toggle("show-modal");
    }
}


})


</script>